Виконання запитів. Оброблення та відображення результатів

Для надсилання запитів до СУБД вживається клас SqlCommand
Для запитів різного типу передбачено декілька методів:
.ExecuteNonQuery - для запитів, що не мають результатів (всі, окрім SELECT)
.ExecuteScalar - для запитів з одним (скалярним) результатом (SELECT COUNT(*) FROM...)
.ExecuteReader - для запитів із табличним результатом

Особливості СУБД: коли виконується запит SELECT СУБД утворює правило,
ітератор, який може рядок-за-рядком повертати результат.

  ADO                                        DBMS
SELECT * FROM Groups --------------------> Компіляція запиту і створення правила
        Reader       <-------------------- ітератор
Reader.Read() -------------------------------> ітератор.next()
           <------------------------------------ рядок результату
у об'єкті Reader заповнено дані
чергового рядка результату

Reader.Read() -------------------------------> ітератор.next()
           <------------------------------------ рядок результату
наступний рядок даних
index    Title
   0      Id			
   1      Name		
   2      Description 
   3      Picture     
Як взяти дані з Reader ?
а) через Get-тер за індексом поля, наприклад
    reader.GetGuid(0)  -- Id as Guid
    reader.GetString(1) -- Name as String
б) через Get-тер за іменем поля, наприклад
    reader.GetString("Description")
в) через індексатор (не рекомендується, оскільки дає object - не типізує)
    reader["Picture"]

!! Після вилучення даних Reader слід закривати (або вживати блок using)
інакше наступні команди будуть завершуватись виключенням "Є незакритий DataReader"
Зокрема, неможна робити вкладені "цикли" читання даних
Цикл по групах {
    Цикл по товарах групи {
        -- нова команда з незакритим Reader від першого запиту (груп)
    }
}
Рішення - одержати всі групи у колекцію, закрити команду, проходити циклом
по "офлайн" колекції